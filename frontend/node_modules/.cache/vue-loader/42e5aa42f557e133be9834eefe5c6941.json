{"remainingRequest":"/home/Suhan/proj/recruiting/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/Suhan/proj/recruiting/frontend/src/@core/layouts/components/app-navbar/components/CartDropdown.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/Suhan/proj/recruiting/frontend/src/@core/layouts/components/app-navbar/components/CartDropdown.vue","mtime":1656249082513},{"path":"/home/Suhan/proj/recruiting/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1656249272602},{"path":"/home/Suhan/proj/recruiting/frontend/node_modules/babel-loader/lib/index.js","mtime":1655207917470},{"path":"/home/Suhan/proj/recruiting/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1656249272602},{"path":"/home/Suhan/proj/recruiting/frontend/node_modules/vue-loader/lib/index.js","mtime":1656249292178}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7CiAgQk5hdkl0ZW1Ecm9wZG93biwgQkJhZGdlLCBCTWVkaWEsIEJMaW5rLCBCSW1nLCBCRm9ybVNwaW5idXR0b24sIEJCdXR0b24sCn0gZnJvbSAnYm9vdHN0cmFwLXZ1ZScKaW1wb3J0IFZ1ZVBlcmZlY3RTY3JvbGxiYXIgZnJvbSAndnVlLXBlcmZlY3Qtc2Nyb2xsYmFyJwppbXBvcnQgUmlwcGxlIGZyb20gJ3Z1ZS1yaXBwbGUtZGlyZWN0aXZlJwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJOYXZJdGVtRHJvcGRvd24sCiAgICBCQmFkZ2UsCiAgICBCTWVkaWEsCiAgICBCTGluaywKICAgIEJJbWcsCiAgICBCRm9ybVNwaW5idXR0b24sCiAgICBWdWVQZXJmZWN0U2Nyb2xsYmFyLAogICAgQkJ1dHRvbiwKICB9LAogIGRpcmVjdGl2ZXM6IHsKICAgIFJpcHBsZSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpdGVtczogW10sCiAgICAgIHBlcmZlY3RTY3JvbGxiYXJTZXR0aW5nczogewogICAgICAgIG1heFNjcm9sbGJhckxlbmd0aDogNjAsCiAgICAgICAgd2hlZWxQcm9wYWdhdGlvbjogZmFsc2UsCiAgICAgIH0sCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgdG90YWxBbW91bnQoKSB7CiAgICAgIGxldCB0b3RhbCA9IDAKICAgICAgdGhpcy5pdGVtcy5mb3JFYWNoKGkgPT4geyB0b3RhbCArPSBpLnByaWNlIH0pCiAgICAgIHJldHVybiB0b3RhbAogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGZldGNoSXRlbXMoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhcHAtZWNvbW1lcmNlL2ZldGNoQ2FydFByb2R1Y3RzJykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLml0ZW1zID0gcmVzcG9uc2UuZGF0YS5wcm9kdWN0cwogICAgICAgIH0pCiAgICB9LAogICAgcmVtb3ZlSXRlbUZyb21DYXJ0KHByb2R1Y3RJZCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXBwLWVjb21tZXJjZS9yZW1vdmVQcm9kdWN0RnJvbUNhcnQnLCB7IHByb2R1Y3RJZCB9KQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IHRoaXMuaXRlbXMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gcHJvZHVjdElkKQogICAgICAgICAgdGhpcy5pdGVtcy5zcGxpY2UoaXRlbUluZGV4LCAxKQoKICAgICAgICAgIC8vIFVwZGF0ZSBjb3VudCBpbiBjYXJ0IGl0ZW1zIHN0YXRlCiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2FwcC1lY29tbWVyY2UvVVBEQVRFX0NBUlRfSVRFTVNfQ09VTlQnLCB0aGlzLml0ZW1zLmxlbmd0aCkKICAgICAgICB9KQogICAgfSwKICB9LAp9Cg=="},{"version":3,"sources":["CartDropdown.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CartDropdown.vue","sourceRoot":"src/@core/layouts/components/app-navbar/components","sourcesContent":["<template>\n  <b-nav-item-dropdown\n    class=\"dropdown-cart mr-25\"\n    menu-class=\"dropdown-menu-media\"\n    right\n    @show=\"fetchItems\"\n  >\n    <template #button-content>\n      <feather-icon\n        :badge=\"$store.state['app-ecommerce'].cartItemsCount\"\n        class=\"text-body\"\n        icon=\"ShoppingCartIcon\"\n        size=\"21\"\n      />\n    </template>\n\n    <!-- Header -->\n    <li class=\"dropdown-menu-header\">\n      <div class=\"dropdown-header d-flex\">\n        <h4 class=\"notification-title mb-0 mr-auto\">\n          My Cart\n        </h4>\n        <b-badge\n          pill\n          variant=\"light-primary\"\n        >\n          {{ $store.state['app-ecommerce'].cartItemsCount }} Items\n        </b-badge>\n      </div>\n    </li>\n\n    <!-- Cart Items -->\n    <vue-perfect-scrollbar\n      v-if=\"items.length\"\n      :settings=\"perfectScrollbarSettings\"\n      class=\"scrollable-container media-list scroll-area\"\n      tagname=\"li\"\n    >\n      <b-media\n        v-for=\"item in items\"\n        :key=\"item.name\"\n      >\n        <template #aside>\n          <b-img\n            :src=\"item.image\"\n            :alt=\"item.name\"\n            rounded\n            width=\"62px\"\n          />\n        </template>\n        <feather-icon\n          icon=\"XIcon\"\n          class=\"cart-item-remove cursor-pointer\"\n          @click.stop=\"removeItemFromCart(item.id)\"\n        />\n        <div class=\"media-heading\">\n          <h6 class=\"cart-item-title\">\n            <b-link class=\"text-body\">\n              {{ item.name }}\n            </b-link>\n          </h6>\n          <small class=\"cart-item-by\">By {{ item.brand }}</small>\n        </div>\n\n        <div class=\"cart-item-qty ml-1\">\n          <b-form-spinbutton\n            v-model=\"item.qty\"\n            min=\"1\"\n            size=\"sm\"\n          />\n        </div>\n\n        <h5 class=\"cart-item-price\">\n          ${{ item.price }}\n        </h5>\n      </b-media>\n    </vue-perfect-scrollbar>\n\n    <!-- Cart Footer -->\n    <li\n      v-if=\"items.length\"\n      class=\"dropdown-menu-footer\"\n    >\n      <div class=\"d-flex justify-content-between mb-1\">\n        <h6 class=\"font-weight-bolder mb-0\">\n          Total:\n        </h6>\n        <h6 class=\"text-primary font-weight-bolder mb-0\">\n          ${{ totalAmount }}\n        </h6>\n      </div>\n      <b-button\n        v-ripple.400=\"'rgba(255, 255, 255, 0.15)'\"\n        variant=\"primary\"\n        block\n        :to=\"{ name: 'apps-e-commerce-checkout' }\"\n      >\n        Checkout\n      </b-button>\n    </li>\n\n    <p\n      v-if=\"!items.length\"\n      class=\"m-0 p-1 text-center\"\n    >\n      Your cart is empty\n    </p>\n  </b-nav-item-dropdown>\n</template>\n\n<script>\nimport {\n  BNavItemDropdown, BBadge, BMedia, BLink, BImg, BFormSpinbutton, BButton,\n} from 'bootstrap-vue'\nimport VuePerfectScrollbar from 'vue-perfect-scrollbar'\nimport Ripple from 'vue-ripple-directive'\n\nexport default {\n  components: {\n    BNavItemDropdown,\n    BBadge,\n    BMedia,\n    BLink,\n    BImg,\n    BFormSpinbutton,\n    VuePerfectScrollbar,\n    BButton,\n  },\n  directives: {\n    Ripple,\n  },\n  data() {\n    return {\n      items: [],\n      perfectScrollbarSettings: {\n        maxScrollbarLength: 60,\n        wheelPropagation: false,\n      },\n    }\n  },\n  computed: {\n    totalAmount() {\n      let total = 0\n      this.items.forEach(i => { total += i.price })\n      return total\n    },\n  },\n  methods: {\n    fetchItems() {\n      this.$store.dispatch('app-ecommerce/fetchCartProducts')\n        .then(response => {\n          this.items = response.data.products\n        })\n    },\n    removeItemFromCart(productId) {\n      this.$store.dispatch('app-ecommerce/removeProductFromCart', { productId })\n        .then(() => {\n          const itemIndex = this.items.findIndex(p => p.id === productId)\n          this.items.splice(itemIndex, 1)\n\n          // Update count in cart items state\n          this.$store.commit('app-ecommerce/UPDATE_CART_ITEMS_COUNT', this.items.length)\n        })\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.dropdown-cart {\n  .media {\n    .media-aside {\n      align-items: center;\n    }\n  }\n}\n</style>\n"]}]}