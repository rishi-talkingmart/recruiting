{"remainingRequest":"/home/Suhan/proj/recruiting/frontend/node_modules/babel-loader/lib/index.js!/home/Suhan/proj/recruiting/frontend/src/@core/auth/jwt/jwtService.js","dependencies":[{"path":"/home/Suhan/proj/recruiting/frontend/src/@core/auth/jwt/jwtService.js","mtime":1656249082506},{"path":"/home/Suhan/proj/recruiting/frontend/babel.config.js","mtime":1656249082498},{"path":"/home/Suhan/proj/recruiting/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1656249272602},{"path":"/home/Suhan/proj/recruiting/frontend/node_modules/babel-loader/lib/index.js","mtime":1655207917470}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL1N1aGFuL3Byb2ovcmVjcnVpdGluZy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9ob21lL1N1aGFuL3Byb2ovcmVjcnVpdGluZy9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiL2hvbWUvU3VoYW4vcHJvai9yZWNydWl0aW5nL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjay5qcyI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvU3VoYW4vcHJvai9yZWNydWl0aW5nL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL2hvbWUvU3VoYW4vcHJvai9yZWNydWl0aW5nL2Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0IGp3dERlZmF1bHRDb25maWcgZnJvbSAnLi9qd3REZWZhdWx0Q29uZmlnJzsKCnZhciBKd3RTZXJ2aWNlID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAvLyBXaWxsIGJlIHVzZWQgYnkgdGhpcyBzZXJ2aWNlIGZvciBtYWtpbmcgQVBJIGNhbGxzCiAgLy8gand0Q29uZmlnIDw9IFdpbGwgYmUgdXNlZCBieSB0aGlzIHNlcnZpY2UKICAvLyBGb3IgUmVmcmVzaGluZyBUb2tlbgogIC8vIEZvciBSZWZyZXNoaW5nIFRva2VuCiAgZnVuY3Rpb24gSnd0U2VydmljZShheGlvc0lucywgand0T3ZlcnJpZGVDb25maWcpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEp3dFNlcnZpY2UpOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiYXhpb3NJbnMiLCBudWxsKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImp3dENvbmZpZyIsIF9vYmplY3RTcHJlYWQoe30sIGp3dERlZmF1bHRDb25maWcpKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImlzQWxyZWFkeUZldGNoaW5nQWNjZXNzVG9rZW4iLCBmYWxzZSk7CgogICAgX2RlZmluZVByb3BlcnR5KHRoaXMsICJzdWJzY3JpYmVycyIsIFtdKTsKCiAgICB0aGlzLmF4aW9zSW5zID0gYXhpb3NJbnM7CiAgICB0aGlzLmp3dENvbmZpZyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdGhpcy5qd3RDb25maWcpLCBqd3RPdmVycmlkZUNvbmZpZyk7IC8vIFJlcXVlc3QgSW50ZXJjZXB0b3IKCiAgICB0aGlzLmF4aW9zSW5zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgIC8vIEdldCB0b2tlbiBmcm9tIGxvY2FsU3RvcmFnZQogICAgICB2YXIgYWNjZXNzVG9rZW4gPSBfdGhpcy5nZXRUb2tlbigpOyAvLyBJZiB0b2tlbiBpcyBwcmVzZW50IGFkZCBpdCB0byByZXF1ZXN0J3MgQXV0aG9yaXphdGlvbiBIZWFkZXIKCgogICAgICBpZiAoYWNjZXNzVG9rZW4pIHsKICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ24KICAgICAgICBjb25maWcuaGVhZGVycy5BdXRob3JpemF0aW9uID0gIiIuY29uY2F0KF90aGlzLmp3dENvbmZpZy50b2tlblR5cGUsICIgIikuY29uY2F0KGFjY2Vzc1Rva2VuKTsKICAgICAgfQoKICAgICAgY29uZmlnLmhlYWRlcnNbJ1gtQVBJLUtFWSddID0gJ3NlY3JldCc7CiAgICAgIGNvbmZpZy5iYXNlVVJMID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElfVVJMOwogICAgICByZXR1cm4gY29uZmlnOwogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7CiAgICB9KTsgLy8gQWRkIHJlcXVlc3QvcmVzcG9uc2UgaW50ZXJjZXB0b3IKCiAgICB0aGlzLmF4aW9zSW5zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiByZXNwb25zZTsKICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICB2YXIgY29uZmlnID0gZXJyb3IuY29uZmlnLAogICAgICAgICAgcmVzcG9uc2UgPSBlcnJvci5yZXNwb25zZTsKICAgICAgdmFyIG9yaWdpbmFsUmVxdWVzdCA9IGNvbmZpZzsKCiAgICAgIGlmIChyZXNwb25zZSAmJiByZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgICAgIGlmICghX3RoaXMuaXNBbHJlYWR5RmV0Y2hpbmdBY2Nlc3NUb2tlbikgewogICAgICAgICAgX3RoaXMuaXNBbHJlYWR5RmV0Y2hpbmdBY2Nlc3NUb2tlbiA9IHRydWU7CgogICAgICAgICAgX3RoaXMucmVmcmVzaFRva2VuKCkudGhlbihmdW5jdGlvbiAocikgewogICAgICAgICAgICBfdGhpcy5pc0FscmVhZHlGZXRjaGluZ0FjY2Vzc1Rva2VuID0gZmFsc2U7IC8vIFVwZGF0ZSBhY2Nlc3NUb2tlbiBpbiBsb2NhbFN0b3JhZ2UKCiAgICAgICAgICAgIF90aGlzLnNldFRva2VuKHIuZGF0YS5hY2Nlc3NfdG9rZW4pOwoKICAgICAgICAgICAgX3RoaXMub25BY2Nlc3NUb2tlbkZldGNoZWQoci5kYXRhLmFjY2Vzc190b2tlbik7CiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHZhciByZXRyeU9yaWdpbmFsUmVxdWVzdCA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICBfdGhpcy5hZGRTdWJzY3JpYmVyKGZ1bmN0aW9uIChhY2Nlc3NUb2tlbikgewogICAgICAgICAgICBvcmlnaW5hbFJlcXVlc3QuaGVhZGVycy5BdXRob3JpemF0aW9uID0gIiIuY29uY2F0KF90aGlzLmp3dENvbmZpZy50b2tlblR5cGUsICIgIikuY29uY2F0KGFjY2Vzc1Rva2VuKTsKICAgICAgICAgICAgcmVzb2x2ZShfdGhpcy5heGlvc0lucyhvcmlnaW5hbFJlcXVlc3QpKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZXRyeU9yaWdpbmFsUmVxdWVzdDsKICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKICAgIH0pOwoKICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgYXJncyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIHRoaXMucmVwbGFjZSgveyhbMC05XSspfS9nLCBmdW5jdGlvbiAobWF0Y2gsIGluZGV4KSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiBhcmdzW2luZGV4XSA9PSAndW5kZWZpbmVkJyA/IG1hdGNoIDogYXJnc1tpbmRleF07CiAgICAgIH0pOwogICAgfTsKICB9CgogIF9jcmVhdGVDbGFzcyhKd3RTZXJ2aWNlLCBbewogICAga2V5OiAib25BY2Nlc3NUb2tlbkZldGNoZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIG9uQWNjZXNzVG9rZW5GZXRjaGVkKGFjY2Vzc1Rva2VuKSB7CiAgICAgIHRoaXMuc3Vic2NyaWJlcnMgPSB0aGlzLnN1YnNjcmliZXJzLmZpbHRlcihmdW5jdGlvbiAoY2FsbGJhY2spIHsKICAgICAgICByZXR1cm4gY2FsbGJhY2soYWNjZXNzVG9rZW4pOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZGRTdWJzY3JpYmVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRTdWJzY3JpYmVyKGNhbGxiYWNrKSB7CiAgICAgIHRoaXMuc3Vic2NyaWJlcnMucHVzaChjYWxsYmFjayk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0VG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRva2VuKCkgewogICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5qd3RDb25maWcuc3RvcmFnZVRva2VuS2V5TmFtZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2V0UmVmcmVzaFRva2VuIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRSZWZyZXNoVG9rZW4oKSB7CiAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmp3dENvbmZpZy5zdG9yYWdlUmVmcmVzaFRva2VuS2V5TmFtZSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2V0VG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFRva2VuKHZhbHVlKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuand0Q29uZmlnLnN0b3JhZ2VUb2tlbktleU5hbWUsIHZhbHVlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRSZWZyZXNoVG9rZW4iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFJlZnJlc2hUb2tlbih2YWx1ZSkgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmp3dENvbmZpZy5zdG9yYWdlUmVmcmVzaFRva2VuS2V5TmFtZSwgdmFsdWUpOwogICAgfQogIH0sIHsKICAgIGtleTogImxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgdmFyIF90aGlzJGF4aW9zSW5zOwoKICAgICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICAgICAgfQoKICAgICAgcmV0dXJuIChfdGhpcyRheGlvc0lucyA9IHRoaXMuYXhpb3NJbnMpLnBvc3QuYXBwbHkoX3RoaXMkYXhpb3NJbnMsIFt0aGlzLmp3dENvbmZpZy5sb2dpbkVuZHBvaW50XS5jb25jYXQoYXJncykpOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZ2lzdGVyIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWdpc3RlcigpIHsKICAgICAgdmFyIF90aGlzJGF4aW9zSW5zMjsKCiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykgewogICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTsKICAgICAgfQoKICAgICAgcmV0dXJuIChfdGhpcyRheGlvc0luczIgPSB0aGlzLmF4aW9zSW5zKS5wb3N0LmFwcGx5KF90aGlzJGF4aW9zSW5zMiwgW3RoaXMuand0Q29uZmlnLnJlZ2lzdGVyRW5kcG9pbnRdLmNvbmNhdChhcmdzKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJvZmlsZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJvZmlsZSgpIHsKICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmF4aW9zSW5zLnBvc3QodGhpcy5qd3RDb25maWcucmVmcmVzaFRva2VuRW5kcG9pbnQpLCB0aGlzLmF4aW9zSW5zLnBvc3QodGhpcy5qd3RDb25maWcucHJvZmlsZUVuZFBvaW50KV0pOwogICAgfQogIH0sIHsKICAgIGtleTogInJlZnJlc2hUb2tlbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVmcmVzaFRva2VuKCkgewogICAgICByZXR1cm4gdGhpcy5heGlvc0lucy5wb3N0KHRoaXMuand0Q29uZmlnLnJlZnJlc2hFbmRwb2ludCArICIvIi5jb25jYXQodGhpcy5nZXRSZWZyZXNoVG9rZW4oKSkpOwogICAgfQogIH0sIHsKICAgIGtleTogInBlbmRpbmdTdXJ2ZXlzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwZW5kaW5nU3VydmV5cygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXhpb3NJbnMuZ2V0KHRoaXMuand0Q29uZmlnLnBlbmRpbmdXb3JrRmxvd3MpOwogICAgfQogIH0sIHsKICAgIGtleTogInN1cnZleXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHN1cnZleXMoKSB7CiAgICAgIHJldHVybiB0aGlzLmF4aW9zSW5zLmdldCh0aGlzLmp3dENvbmZpZy5hbGxXb3JrRmxvd3MpOwogICAgfQogIH0sIHsKICAgIGtleTogImdldFV3ZXNTdXJ2ZXlEYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0VXdlc1N1cnZleURhdGEgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5heGlvc0lucy5nZXQodGhpcy5qd3RDb25maWcuZ2V0VXdlc1N1cnZleURhdGEpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBfY29udGV4dC5zZW50LmRhdGEuZmlsdGVyKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy53b3JrZmxvd19pZCA9PT0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9VV0VTX0lEOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gZ2V0VXdlc1N1cnZleURhdGEoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRVd2VzU3VydmV5RGF0YS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gZ2V0VXdlc1N1cnZleURhdGE7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJ2ZXJpZnlBY2NvdW50IiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfdmVyaWZ5QWNjb3VudCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIodG9rZW4sIHBhc3N3b3JkKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCB0aGlzLmF4aW9zSW5zLnBvc3QodGhpcy5qd3RDb25maWcudmVyaWZ5QWNjb3VudC5mb3JtYXQodG9rZW4pLCB7CiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICBjYXNlIDE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiB2ZXJpZnlBY2NvdW50KF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX3ZlcmlmeUFjY291bnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHZlcmlmeUFjY291bnQ7CiAgICB9KCkKICB9XSk7CgogIHJldHVybiBKd3RTZXJ2aWNlOwp9KCk7CgpleHBvcnQgeyBKd3RTZXJ2aWNlIGFzIGRlZmF1bHQgfTs="},{"version":3,"names":["jwtDefaultConfig","JwtService","axiosIns","jwtOverrideConfig","jwtConfig","interceptors","request","use","config","accessToken","getToken","headers","Authorization","tokenType","baseURL","process","env","VUE_APP_API_URL","error","Promise","reject","response","originalRequest","status","isAlreadyFetchingAccessToken","refreshToken","then","r","setToken","data","access_token","onAccessTokenFetched","retryOriginalRequest","resolve","addSubscriber","String","prototype","format","args","arguments","replace","match","index","subscribers","filter","callback","push","localStorage","getItem","storageTokenKeyName","storageRefreshTokenKeyName","value","setItem","post","loginEndpoint","registerEndpoint","all","refreshTokenEndpoint","profileEndPoint","refreshEndpoint","getRefreshToken","get","pendingWorkFlows","allWorkFlows","getUwesSurveyData","res","workflow_id","VUE_APP_UWES_ID","token","password","verifyAccount"],"sources":["/home/Suhan/proj/recruiting/frontend/src/@core/auth/jwt/jwtService.js"],"sourcesContent":["import jwtDefaultConfig from './jwtDefaultConfig';\n\nexport default class JwtService {\n  // Will be used by this service for making API calls\n  axiosIns = null;\n\n  // jwtConfig <= Will be used by this service\n  jwtConfig = { ...jwtDefaultConfig };\n\n  // For Refreshing Token\n  isAlreadyFetchingAccessToken = false;\n\n  // For Refreshing Token\n  subscribers = [];\n\n  constructor(axiosIns, jwtOverrideConfig) {\n    this.axiosIns = axiosIns;\n    this.jwtConfig = { ...this.jwtConfig, ...jwtOverrideConfig };\n\n    // Request Interceptor\n    this.axiosIns.interceptors.request.use(\n      (config) => {\n        // Get token from localStorage\n        const accessToken = this.getToken();\n\n        // If token is present add it to request's Authorization Header\n        if (accessToken) {\n          // eslint-disable-next-line no-param-reassign\n          config.headers.Authorization = `${this.jwtConfig.tokenType} ${accessToken}`;\n        }\n        config.headers['X-API-KEY'] = 'secret';\n\n        config.baseURL = process.env.VUE_APP_API_URL;\n        return config;\n      },\n      (error) => Promise.reject(error)\n    );\n\n    // Add request/response interceptor\n    this.axiosIns.interceptors.response.use(\n      (response) => response,\n      (error) => {\n        const { config, response } = error;\n        const originalRequest = config;\n\n        if (response && response.status === 403) {\n          if (!this.isAlreadyFetchingAccessToken) {\n            this.isAlreadyFetchingAccessToken = true;\n            this.refreshToken().then((r) => {\n              this.isAlreadyFetchingAccessToken = false;\n\n              // Update accessToken in localStorage\n              this.setToken(r.data.access_token);\n              this.onAccessTokenFetched(r.data.access_token);\n            });\n          }\n          const retryOriginalRequest = new Promise((resolve) => {\n            this.addSubscriber((accessToken) => {\n              originalRequest.headers.Authorization = `${this.jwtConfig.tokenType} ${accessToken}`;\n              resolve(this.axiosIns(originalRequest));\n            });\n          });\n          return retryOriginalRequest;\n        }\n        return Promise.reject(error);\n      }\n    );\n    String.prototype.format = function () {\n      var args = arguments;\n      return this.replace(/{([0-9]+)}/g, function (match, index) {\n        return typeof args[index] == 'undefined' ? match : args[index];\n      });\n    };\n  }\n\n  onAccessTokenFetched(accessToken) {\n    this.subscribers = this.subscribers.filter((callback) => callback(accessToken));\n  }\n\n  addSubscriber(callback) {\n    this.subscribers.push(callback);\n  }\n\n  getToken() {\n    return localStorage.getItem(this.jwtConfig.storageTokenKeyName);\n  }\n\n  getRefreshToken() {\n    return localStorage.getItem(this.jwtConfig.storageRefreshTokenKeyName);\n  }\n\n  setToken(value) {\n    localStorage.setItem(this.jwtConfig.storageTokenKeyName, value);\n  }\n\n  setRefreshToken(value) {\n    localStorage.setItem(this.jwtConfig.storageRefreshTokenKeyName, value);\n  }\n\n  login(...args) {\n    return this.axiosIns.post(this.jwtConfig.loginEndpoint, ...args);\n  }\n\n  register(...args) {\n    return this.axiosIns.post(this.jwtConfig.registerEndpoint, ...args);\n  }\n  profile() {\n    return Promise.all([this.axiosIns.post(this.jwtConfig.refreshTokenEndpoint), this.axiosIns.post(this.jwtConfig.profileEndPoint)]);\n  }\n\n  refreshToken() {\n    return this.axiosIns.post(this.jwtConfig.refreshEndpoint + `/${this.getRefreshToken()}`);\n  }\n\n  pendingSurveys() {\n    return this.axiosIns.get(this.jwtConfig.pendingWorkFlows);\n  }\n\n  surveys() {\n    return this.axiosIns.get(this.jwtConfig.allWorkFlows);\n  }\n  async getUwesSurveyData() {\n    return (await this.axiosIns.get(this.jwtConfig.getUwesSurveyData)).data.filter((res) => res.workflow_id === process.env.VUE_APP_UWES_ID);\n  }\n  async verifyAccount(token, password) {\n    return this.axiosIns.post(this.jwtConfig.verifyAccount.format(token), { password });\n  }\n}\n"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,gBAAP,MAA6B,oBAA7B;;IAEqBC,U;EACnB;EAGA;EAGA;EAGA;EAGA,oBAAYC,QAAZ,EAAsBC,iBAAtB,EAAyC;IAAA;;IAAA;;IAAA,kCAX9B,IAW8B;;IAAA,qDARxBH,gBAQwB;;IAAA,sDALV,KAKU;;IAAA,qCAF3B,EAE2B;;IACvC,KAAKE,QAAL,GAAgBA,QAAhB;IACA,KAAKE,SAAL,mCAAsB,KAAKA,SAA3B,GAAyCD,iBAAzC,EAFuC,CAIvC;;IACA,KAAKD,QAAL,CAAcG,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CACE,UAACC,MAAD,EAAY;MACV;MACA,IAAMC,WAAW,GAAG,KAAI,CAACC,QAAL,EAApB,CAFU,CAIV;;;MACA,IAAID,WAAJ,EAAiB;QACf;QACAD,MAAM,CAACG,OAAP,CAAeC,aAAf,aAAkC,KAAI,CAACR,SAAL,CAAeS,SAAjD,cAA8DJ,WAA9D;MACD;;MACDD,MAAM,CAACG,OAAP,CAAe,WAAf,IAA8B,QAA9B;MAEAH,MAAM,CAACM,OAAP,GAAiBC,OAAO,CAACC,GAAR,CAAYC,eAA7B;MACA,OAAOT,MAAP;IACD,CAdH,EAeE,UAACU,KAAD;MAAA,OAAWC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAX;IAAA,CAfF,EALuC,CAuBvC;;IACA,KAAKhB,QAAL,CAAcG,YAAd,CAA2BgB,QAA3B,CAAoCd,GAApC,CACE,UAACc,QAAD;MAAA,OAAcA,QAAd;IAAA,CADF,EAEE,UAACH,KAAD,EAAW;MACT,IAAQV,MAAR,GAA6BU,KAA7B,CAAQV,MAAR;MAAA,IAAgBa,QAAhB,GAA6BH,KAA7B,CAAgBG,QAAhB;MACA,IAAMC,eAAe,GAAGd,MAAxB;;MAEA,IAAIa,QAAQ,IAAIA,QAAQ,CAACE,MAAT,KAAoB,GAApC,EAAyC;QACvC,IAAI,CAAC,KAAI,CAACC,4BAAV,EAAwC;UACtC,KAAI,CAACA,4BAAL,GAAoC,IAApC;;UACA,KAAI,CAACC,YAAL,GAAoBC,IAApB,CAAyB,UAACC,CAAD,EAAO;YAC9B,KAAI,CAACH,4BAAL,GAAoC,KAApC,CAD8B,CAG9B;;YACA,KAAI,CAACI,QAAL,CAAcD,CAAC,CAACE,IAAF,CAAOC,YAArB;;YACA,KAAI,CAACC,oBAAL,CAA0BJ,CAAC,CAACE,IAAF,CAAOC,YAAjC;UACD,CAND;QAOD;;QACD,IAAME,oBAAoB,GAAG,IAAIb,OAAJ,CAAY,UAACc,OAAD,EAAa;UACpD,KAAI,CAACC,aAAL,CAAmB,UAACzB,WAAD,EAAiB;YAClCa,eAAe,CAACX,OAAhB,CAAwBC,aAAxB,aAA2C,KAAI,CAACR,SAAL,CAAeS,SAA1D,cAAuEJ,WAAvE;YACAwB,OAAO,CAAC,KAAI,CAAC/B,QAAL,CAAcoB,eAAd,CAAD,CAAP;UACD,CAHD;QAID,CAL4B,CAA7B;QAMA,OAAOU,oBAAP;MACD;;MACD,OAAOb,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;IACD,CA1BH;;IA4BAiB,MAAM,CAACC,SAAP,CAAiBC,MAAjB,GAA0B,YAAY;MACpC,IAAIC,IAAI,GAAGC,SAAX;MACA,OAAO,KAAKC,OAAL,CAAa,aAAb,EAA4B,UAAUC,KAAV,EAAiBC,KAAjB,EAAwB;QACzD,OAAO,OAAOJ,IAAI,CAACI,KAAD,CAAX,IAAsB,WAAtB,GAAoCD,KAApC,GAA4CH,IAAI,CAACI,KAAD,CAAvD;MACD,CAFM,CAAP;IAGD,CALD;EAMD;;;;WAED,8BAAqBjC,WAArB,EAAkC;MAChC,KAAKkC,WAAL,GAAmB,KAAKA,WAAL,CAAiBC,MAAjB,CAAwB,UAACC,QAAD;QAAA,OAAcA,QAAQ,CAACpC,WAAD,CAAtB;MAAA,CAAxB,CAAnB;IACD;;;WAED,uBAAcoC,QAAd,EAAwB;MACtB,KAAKF,WAAL,CAAiBG,IAAjB,CAAsBD,QAAtB;IACD;;;WAED,oBAAW;MACT,OAAOE,YAAY,CAACC,OAAb,CAAqB,KAAK5C,SAAL,CAAe6C,mBAApC,CAAP;IACD;;;WAED,2BAAkB;MAChB,OAAOF,YAAY,CAACC,OAAb,CAAqB,KAAK5C,SAAL,CAAe8C,0BAApC,CAAP;IACD;;;WAED,kBAASC,KAAT,EAAgB;MACdJ,YAAY,CAACK,OAAb,CAAqB,KAAKhD,SAAL,CAAe6C,mBAApC,EAAyDE,KAAzD;IACD;;;WAED,yBAAgBA,KAAhB,EAAuB;MACrBJ,YAAY,CAACK,OAAb,CAAqB,KAAKhD,SAAL,CAAe8C,0BAApC,EAAgEC,KAAhE;IACD;;;WAED,iBAAe;MAAA;;MAAA,kCAANb,IAAM;QAANA,IAAM;MAAA;;MACb,OAAO,uBAAKpC,QAAL,EAAcmD,IAAd,wBAAmB,KAAKjD,SAAL,CAAekD,aAAlC,SAAoDhB,IAApD,EAAP;IACD;;;WAED,oBAAkB;MAAA;;MAAA,mCAANA,IAAM;QAANA,IAAM;MAAA;;MAChB,OAAO,wBAAKpC,QAAL,EAAcmD,IAAd,yBAAmB,KAAKjD,SAAL,CAAemD,gBAAlC,SAAuDjB,IAAvD,EAAP;IACD;;;WACD,mBAAU;MACR,OAAOnB,OAAO,CAACqC,GAAR,CAAY,CAAC,KAAKtD,QAAL,CAAcmD,IAAd,CAAmB,KAAKjD,SAAL,CAAeqD,oBAAlC,CAAD,EAA0D,KAAKvD,QAAL,CAAcmD,IAAd,CAAmB,KAAKjD,SAAL,CAAesD,eAAlC,CAA1D,CAAZ,CAAP;IACD;;;WAED,wBAAe;MACb,OAAO,KAAKxD,QAAL,CAAcmD,IAAd,CAAmB,KAAKjD,SAAL,CAAeuD,eAAf,cAAqC,KAAKC,eAAL,EAArC,CAAnB,CAAP;IACD;;;WAED,0BAAiB;MACf,OAAO,KAAK1D,QAAL,CAAc2D,GAAd,CAAkB,KAAKzD,SAAL,CAAe0D,gBAAjC,CAAP;IACD;;;WAED,mBAAU;MACR,OAAO,KAAK5D,QAAL,CAAc2D,GAAd,CAAkB,KAAKzD,SAAL,CAAe2D,YAAjC,CAAP;IACD;;;;uFACD;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACgB,KAAK7D,QAAL,CAAc2D,GAAd,CAAkB,KAAKzD,SAAL,CAAe4D,iBAAjC,CADhB;;cAAA;gBAAA,+CACqEnC,IADrE,CAC0Ee,MAD1E,CACiF,UAACqB,GAAD;kBAAA,OAASA,GAAG,CAACC,WAAJ,KAAoBnD,OAAO,CAACC,GAAR,CAAYmD,eAAzC;gBAAA,CADjF;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;mFAGA,kBAAoBC,KAApB,EAA2BC,QAA3B;QAAA;UAAA;YAAA;cAAA;gBAAA,kCACS,KAAKnE,QAAL,CAAcmD,IAAd,CAAmB,KAAKjD,SAAL,CAAekE,aAAf,CAA6BjC,MAA7B,CAAoC+B,KAApC,CAAnB,EAA+D;kBAAEC,QAAQ,EAARA;gBAAF,CAA/D,CADT;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;;;SA1HmBpE,U"}]}